# Agent Guide

This file consolidates project needs from `TASKS.md`, `CONTEXT.md`, and `STATE.json`.

## Purpose
- Provide a framework for Python desktop tools (Hello-world: image mosaic from YAML).
- Include a GUI editor example to visually edit layouts and export PNGs.

## Current Status
- Packaging and entry points implemented; dependencies pinned.
- Unit tests and CI/CD scripts exist; CI workflows are configured for GitHub and GitLab.
- Security tooling (bandit, pip-audit, safety scan, semgrep config, SBOM) in place.
- Secrets scan tool available: `python tools/check_secrets.py`.
- Safety scan requires SAFETY_API_KEY in non-interactive runs; otherwise it is skipped.
- End-to-end checks run on 2026-02-04; Nuitka build failed under Windows Store Python.
- Roadmap phases 0-3 and 5 partially complete; phase 4 started; phase 7 not started.
- Tooling flags and cache behavior are documented in `TOOLING.md`.
- Environment bootstrap script is available via `python tools/setup_env.py`.
- Cross-platform task runner is available via `python tools/run_task.py`.

## How To Run
- Installed CLI: `lyco`
- Module: `python -m lyco_image_mosaic`
- Repo wrapper: `python Lyco.py`

## Key Files
- Core CLI/GUI: `src/lyco_image_mosaic/cli.py`
- Launcher: `src/lyco_image_mosaic/launcher.py`
- Module entry: `src/lyco_image_mosaic/__main__.py`
- Build binary: `tools/build_binary.py`
- Security checks: `tools/security_checks.py`
- Post CI report: `tools/post_ci_cd_report.py`
- SBOM inspect: `tools/sbom_inspect.py`
- CI guard: `tools/ci_guard.py`
- CI record: `tools/ci_record.py`
- SBOM cache: `tools/should_run_sbom.py`
- UI testing notes: `tools/ui_testing.md`
- Secrets scan: `tools/check_secrets.py`
- Task runner: `tools/run_task.py`
- Env setup: `tools/setup_env.py`
- Clean artifacts: `tools/clean_artifacts.py`
- WSL probe: `tools/wsl_probe.py`
- WSL security: `tools/run_security_wsl.py`
- WSL CI: `tools/run_ci_wsl.py`
- Docker probe: `tools/docker_probe.py`
- Docker security: `tools/run_security_docker.py`
- Docker CI: `tools/run_ci_docker.py`
- WSL Docker install: `scripts/wsl_install_docker.sh`
- WSL Docker compose: `scripts/wsl_run_compose.sh`
- WSL Docker bridge: `tools/run_wsl_docker.py`
- Make targets: `Makefile`
- Tooling flags: `TOOLING.md`
- Tests: `tests/`
- Tests docs: `tests/README.md`
- Local CI tests: `tests/test_ci_local.py`
- Docs: `README.md`, `DOCS.md`, `CONTEXT.md`, `TASKS.md`
- TODOs: `TODO.md`
- Environment file: `.env` (generated by `tools/setup_env.py`)

## Commands
- Tests: `python -m unittest discover -s tests`
- Build binary: `python tools/build_binary.py`
- Build dist: `python -m build`
- Build wheels: `cibuildwheel --output-dir dist`
- Upload: `twine upload dist/*`
- Security: `python tools/security_checks.py`
- Pylint: `python tools/check_pylint.py`
- Vulnerabilities: `python tools/check_vulnerabilities.py`
- Audit: `python tools/check_audit.py`
- SBOM: `python tools/generate_sbom.py`
- Setup env: `python tools/setup_env.py`
- Task runner: `python tools/run_task.py ci-fast`

## Platform Caveats
- GUI requires a desktop display (X11/Wayland on Linux).
- PyQt5 and compiled wheels are platform- and Python-version-specific.
- Windows `lyco` requires Python Scripts directory on `PATH`.
- macOS Gatekeeper may block first run of downloaded binaries.
- Semgrep is not supported on native Windows; use WSL or run in CI.
Optional helpers: `powershell tools/run_semgrep_wsl.ps1`, `powershell tools/run_semgrep_docker.ps1`.

## Roadmap (Phased)
1. Product Definition
2. Packaging/Metadata/Release Readiness
3. Quality Gates/Dev Experience
4. Testing/Validation
5. CI/CD and Distribution
6. Security and Supply Chain
7. Documentation and Support
8. Productization and GTM

## CI/CD Prompt Flow
See `prompts/CI_CD_TASKS.md` and step prompts in `prompts/`.

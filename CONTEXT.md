# Project Context

This file is a quick-reference for contributors and reviewers. It summarizes the product purpose, how to run it, how it is packaged, and where to look for deeper documentation.

## Purpose
- Provide a framework for Python desktop tools (Hello-world: image mosaic from YAML).
- Include a GUI editor example to visually edit layouts and export PNGs.

## Current Status
- Packaging and entry points are implemented; dependencies are pinned.
- Unit tests and CI/CD scripts exist; CI workflows are configured for GitHub and GitLab.
- VS Code tasks are available for run, build, compile, install, test, and CI checks.
- Security tooling (bandit, pip-audit, safety scan, semgrep config, SBOM) is in place.
- Secrets scan tool is available via `python tools/check_secrets.py`.
- Safety scan requires SAFETY_API_KEY in non-interactive runs; otherwise it is skipped.
- End-to-end checks run on 2026-02-04; Nuitka build failed under Windows Store Python.
- Roadmap phases 0-3 and 5 are partially complete; phase 4 is started; phase 7 is not started.
- Tooling flags and cache behavior are documented in `TOOLING.md`.
- Environment bootstrap script is available via `python tools/setup_env.py`.
- Cross-platform task runner is available via `python tools/run_task.py`.

## How To Run
- Installed CLI: `lyco` (prefers bundled compiled binary; falls back to Python).
- Module: `python -m lyco`.
- Repo wrapper: `python Lyco.py`.

## Primary Files
- `src/lyco/cli.py`: Core CLI and GUI implementation.
- `src/lyco/launcher.py`: Binary-first launcher.
- `src/lyco/__main__.py`: Module entry point.
- `tools/build_binary.py`: Nuitka build helper.
- `tools/security_checks.py`: Security pipeline checks (bandit, pip-audit, safety, semgrep).
- `tools/run_semgrep_wsl.ps1`: Run semgrep via WSL on Windows.
- `tools/run_semgrep_docker.ps1`: Run semgrep via Docker on Windows.
- `tools/check_pylint.py`: Pylint check wrapper.
- `tools/check_vulnerabilities.py`: Safety check wrapper.
- `tools/check_audit.py`: pip-audit check wrapper.
- `tools/generate_sbom.py`: SBOM generation wrapper.
- `tools/sbom_inspect.py`: SBOM inspection helper.
- `tools/post_ci_cd_report.py`: Post CI/CD remediation report generator.
- `tools/ci_guard.py`: CI guard for full runs.
- `tools/ci_record.py`: CI run artifact writer.
- `tools/should_run_sbom.py`: SBOM cache helper.
- `tools/ui_testing.md`: UI testing guidance.
- `tools/check_secrets.py`: Secret scanning utility.
- `tools/run_task.py`: Cross-platform Makefile/CI task runner.
- `tools/setup_env.py`: .env generator with OS/CI defaults.
- `tools/clean_artifacts.py`: Remove build/test artifacts.
- `tools/wsl_probe.py`: WSL availability check.
- `tools/run_security_wsl.py`: Run security checks inside WSL.
- `tools/run_ci_wsl.py`: Run full CI inside WSL.
- `tools/docker_probe.py`: Docker availability check.
- `tools/run_security_docker.py`: Run security checks inside Docker.
- `tools/run_ci_docker.py`: Run full CI inside Docker.
- `docker-compose.yml`: Docker Compose services for CI/security.
- `scripts/wsl_install_docker.sh`: Install Docker inside WSL.
- `scripts/wsl_run_compose.sh`: Run docker-compose tasks inside WSL.
- `tools/run_wsl_docker.py`: Windows bridge for WSL Docker install/compose.
- `Makefile`: unified targets for CI, tests, and tooling.
- `tests/`: `unittest` suite.
- `tests/README.md`: Test suite documentation.
- `tests/test_ci_local.py`: Local CI/CD checks (opt-in via RUN_LOCAL_CI=1).
- `.github/workflows/ci.yml`: GitHub Actions CI.
- `.gitlab-ci.yml`: GitLab CI.
- `.vscode/tasks.json`: VS Code task runners.
- `.vscode/launch.json`: VS Code debug configs.
- `.vscode/settings.json`: VS Code interpreter/env config.
- `.env`: optional local environment settings generated by `tools/setup_env.py`.

## Packaging And Release
- Build system: `pyproject.toml` with `setuptools`.
- Optional build tooling: `build`, `cibuildwheel`, `nuitka`, `twine`.
- Optional security tooling: `bandit`, `pip-audit`, `safety`, `semgrep`.
- Wheels may bundle a compiled binary in `src/lyco/bin/`.
- Dependencies are pinned in `requirements.txt`.
- Developer tools are pinned in `requirements-dev.txt`.
- Semgrep is pinned separately in `requirements-semgrep.txt`.
- Safety uses `safety scan` with `.safety-policy.yml`.
- Environment flags live in `.env.example` and are generated via `tools/setup_env.py`.

## Documentation Map
- `README.md`: Quick start, install, usage, build notes, tests.
- `DOCS.md`: Full usage, install, packaging, and testing details.
- `TOOLING.md`: Flags, cache behavior, CI guard, artifacts.
- `TASKS.md`: Product implementation roadmap by phase.
- `prompts/CI_CD_TASKS.md`: CI/CD checklist prompts.
- `AGENT.md`: Consolidated project guide for automation.
- `TODO.md`: Open items and follow-ups.

## Tests
- Run: `python -m unittest discover -s tests`

## Platform Caveats
- GUI requires a desktop display (X11/Wayland on Linux).
- PyQt5 and compiled wheels are platform- and Python-version-specific.
- `semgrep` is not supported on native Windows; use WSL or run in CI.
Optional helpers: `powershell tools/run_semgrep_wsl.ps1`, `powershell tools/run_semgrep_docker.ps1`.

